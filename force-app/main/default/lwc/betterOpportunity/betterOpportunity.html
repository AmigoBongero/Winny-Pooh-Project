<template>
    <lightning-card title="Better Opportunities" icon-name="action:add_contact">
        <div class="slds-p-around_medium">

            <div class="slds-form-element slds-m-left_medium">
                <c-acc-search onsearch={handleSearch}></c-acc-search>
            </div>

            <template if:true={opportunities}>
                <div class="slds-grid slds-wrap">
                    <div class="slds-col slds-size_1-of-5 slds-m-around_medium background_gray-1">
                        <h2 class="slds-align_absolute-center slds-p-around_medium slds-text-title_bold">Opportunities</h2>
                        <div class="slds-box slds-box_vertical">
                            <template for:each={opportunities} for:item="opp">
                                <div key={opp.id} class="slds-m-bottom_small">
                                    <lightning-button
                                            variant="brand-outline"
                                            stretch="true"
                                            key={opp.Id}
                                            label={opp.Name}
                                            onclick={selectOpportunity}
                                            data-id={opp.Id}>
                                    </lightning-button>
                                </div>
                            </template>
                        </div>
                    </div>

                    <div class="slds-col slds-size_2-of-4 slds-m-around_medium">
                        <template if:true={selectedOpportunity}>
                            <div class="slds-p-around_large background_gray-2">
                                <div class="slds-align_absolute-center slds-m-around_medium">
                                    <h1 class="slds-text-title_bold">{selectedOpportunity.Name}</h1>
                                </div>
                                <lightning-record-form
                                        record-id={selectedOpportunity.Id}
                                        object-api-name="Opportunity"
                                        fields={fields}
                                        mode="view"
                                        onsuccess={handleSubmit}>
                                </lightning-record-form>
                            </div>
                        </template>
                    </div>
                </div>
            </template>
        </div>
    </lightning-card>
</template>